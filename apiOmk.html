<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>API Omeka S</title>
</head>
<body>

    <button id="btnEnvoyer">Envoyer les données à Omeka S</button>
    <pre id="resultat"></pre>

    <script>
        // Configuration API
        const baseURL = "http://localhost/omk_THyp_25-26_clone/omeka-s/api/items";
        const key_identity = "dURgA6sfAT3VGheTS97xwZj983Cr33fv";
        const key_credential = "Z7QCZ2AM0G0wwNAwVuSGwZ4tbUYCr6gb";
        
        // Données hardcodées correspondant au template Texte_resume
        const newItem = {
            "o:resource_template": { "o:id": 14 },
            "o:resource_class": { "o:id": 113 },
            
            "dcterms:title": [
                {
                    "@value": "Mon titre ici",
                    "type": "literal"
                }
            ],
            "ex:texte": [
                {
                    "@value": "Voici le contenu du texte",
                    "type": "literal"
                }
            ],
            "ex:resume": [
                {
                    "@value": "Résumé ici",
                    "type": "literal"
                }
            ]
        };
        
        document.getElementById("btnEnvoyer").addEventListener("click", () => {
            fetch(`${baseURL}?key_identity=${key_identity}&key_credential=${key_credential}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(newItem)
            })
            .then(response => {
                if (!response.ok) {
                    return response.text().then(text => {
                        throw new Error(`Erreur HTTP ${response.status}: ${text}`);
                    });
                }
                return response.json();
            })
            .then(data => {
                document.getElementById("resultat").textContent =
                    "Item créé avec succès :\n" + JSON.stringify(data, null, 2);
            })
            .catch(err => {
                document.getElementById("resultat").textContent =
                    "Erreur : " + err.message;
            });
        });
    </script>
</body>
</html>